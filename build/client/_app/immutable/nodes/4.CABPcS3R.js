import{c as Ae,d as Ue,a as f,l as Me,t as h}from"../chunks/DgMzrqux.js";import"../chunks/Dfo8cZ4o.js";import{x as We,aS as ft,aT as Ye,h as mt,aD as gt,aU as xt,m as Le,a as Ge,p as Re,aV as ht,f as we,b as Ce,s as a,c as t,F as m,r as e,t as F,K as le,g as l,aP as bt,aW as Ee,aX as yt,G as z,aY as wt,I as O,aZ as re}from"../chunks/DsZSh94P.js";import{l as kt,a as b,e as _e}from"../chunks/COIN8evz.js";import{s as i}from"../chunks/DkCP2Fnt.js";import{i as J}from"../chunks/BFO-mupc.js";import{e as V,r as $t,s as Ze,i as q}from"../chunks/D9am8Gvn.js";import{i as He}from"../chunks/DdUBiRTo.js";import{p as ie,s as Ft,a as Ot}from"../chunks/Dg7HLL5Q.js";import{l as Pt}from"../chunks/zU8o-TzL.js";import{s as It}from"../chunks/c86IGuWO.js";function Tt(s,c,n){var R=s.__className,d=St(c);We&&s.className===d?s.__className=d:(R!==d||We&&s.className!==d)&&(c==null?s.removeAttribute("class"):s.className=d,s.__className=d)}function St(s,c){return(s??"")+""}function Nt(s,c,n=c){var R=ft();kt(s,"input",d=>{s.type==="checkbox"&&Ye();var x=d?s.defaultValue:s.value;if(x=je(s)?De(x):x,n(x),R&&x!==(x=c())){var B=s.selectionStart,P=s.selectionEnd;s.value=x??"",P!==null&&(s.selectionStart=B,s.selectionEnd=Math.min(P,s.value.length))}}),(We&&s.defaultValue!==s.value||mt(c)==null&&s.value)&&n(je(s)?De(s.value):s.value),gt(()=>{s.type==="checkbox"&&Ye();var d=c();je(s)&&d===De(s.value)||s.type==="date"&&!d&&!s.value||d!==s.value&&(s.value=d??"")})}function je(s){var c=s.type;return c==="number"||c==="range"}function De(s){return s===""?null:+s}function Et(s,c){s!=null&&typeof s.subscribe!="function"&&xt(c)}Le();oe[m]="src/lib/components/Weights.svelte";var jt=b(h('<div class="weight-control svelte-9u5fer"><label class="label svelte-9u5fer"> </label> <div class="slider-container svelte-9u5fer"><input type="range" min="0" max="20" step="0.1" class="slider svelte-9u5fer"> <span class="value svelte-9u5fer"> </span></div></div>'),oe[m],[[40,10,[[41,12],[42,12,[[43,14],[50,14]]]]]]),Dt=b(h('<div class="popup-backdrop svelte-9u5fer"><div class="popup-content svelte-9u5fer"><button class="close-button svelte-9u5fer">√ó</button> <h2 class="text-4xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-pink-500 mt-8">Tune your search</h2> <div class="mb-6"></div> <!> <div class="save-button-container svelte-9u5fer"><button class="mt-6 p-3 rounded-lg text-white font-semibold text-xl bg-gradient-to-r from-blue-400 to-pink-400 hover:from-blue-300 hover:to-pink-300 transition-all duration-300 transform hover:scale-105">Save Weights</button></div></div></div>'),oe[m],[[33,4,[[34,6,[[35,8],[37,8],[38,8],[55,8,[[56,12]]]]]]]]);function oe(s,c){Ae(new.target),Re(c,!1,oe);let n=ie(c,"weights",12),R=ie(c,"isPopupOpen",8),d=ie(c,"setIsPopupOpen",8);const x=ht(),B=()=>{x("updateWeights"),d()(!1)},P=()=>{d()(!1)},ne={occurrence:"I want my user to have a lot of similar material ‚úÖ‚úÖ",similarity_pos:"I want my user to be in love with my product ü•∞",similarity_neg:"I want my user to be craving for my product ü§í",similarity_desc:"I want my user to associate with my product üßöü•∑",followers_count:"I want my user to be famous üëë",likes:"I want my user to be liked üì∂",rt:"I want my user to be impactful üåé‚Äã"};He();var k=Ue(),C=we(k);{var y=U=>{var N=Dt(),W=t(N),A=t(W),ee=a(A,6);V(ee,1,()=>Object.keys(n()),q,(Q,I)=>{var M=jt(),H=t(M),te=t(H,!0);e(H);var L=a(H,2),E=t(L);$t(E);var Y=a(E,2),K=t(Y);e(Y),e(L),e(M),F(Z=>{Ze(H,"for",l(I)),i(te,ne[l(I)]),Ze(E,"id",l(I)),i(K,`${Z??""} / 20`)},[()=>n()[l(I)].toFixed(0)],le),Nt(E,()=>n()[l(I)],Z=>n(n()[l(I)]=Z,!0)),f(Q,M)});var X=a(ee,2),ce=t(X);e(X),e(W),e(N),_e("click",A,P),_e("click",ce,B),f(U,N)};J(C,U=>{R()&&U(y)})}return f(s,k),Ce({...Me()})}Ge(oe);Le();S[m]="src/lib/components/UserDetails.svelte";var Ut=b(h("<li> </li>"),S[m],[[53,5]]),Wt=b(h('<div class="mt-4"><h4 class="font-medium text-blue-600">Similar Descriptions</h4> <ul class="list-disc pl-5 space-y-1 text-gray-600"></ul> <p>Avg. Similarity: <span class="font-semibold"> </span></p></div>'),S[m],[[49,2,[[50,4],[51,4],[56,4,[[56,24]]]]]]),At=b(h("<li> </li>"),S[m],[[65,5]]),Mt=b(h('<div class="mt-4"><h4 class="font-medium text-green-600">Most Positive Tweets</h4> <ul class="list-disc pl-5 space-y-1 text-gray-600"></ul> <p>Avg. Similarity: <span class="font-semibold"> </span></p></div>'),S[m],[[61,2,[[62,4],[63,4],[68,4,[[68,24]]]]]]),Lt=b(h("<li> </li>"),S[m],[[77,5]]),Gt=b(h('<div class="mt-4"><h4 class="font-medium text-red-600">Most Negative Tweets</h4> <ul class="list-disc pl-5 space-y-1 text-gray-600"></ul> <p>Avg. Similarity: <span class="font-semibold"> </span></p></div>'),S[m],[[73,2,[[74,4],[75,4],[80,4,[[80,24]]]]]]),Rt=b(h("<li> </li>"),S[m],[[87,5]]),Ct=b(h('<div class="h-full overflow-y-auto"><div class="p-6"><button class="text-gray-500 hover:text-gray-700 mb-4">‚¨ÖÔ∏è Back to list</button> <h3 class="text-xl font-bold text-gray-900 mb-2"> </h3> <p class="text-gray-600"> </p> <div class="mt-4"><h4 class="font-medium text-gray-700">User Stats</h4> <ul class="list-disc pl-5 space-y-1 text-gray-600"><li>Overall Score: <span class="font-semibold"> </span></li> <li>Avg. Likes: <span class="font-semibold"> </span></li> <li>Avg. Retweets: <span class="font-semibold"> </span></li> <li>Followers: <span class="font-semibold"> </span></li></ul></div> <!> <!> <!> <div class="mt-4"><h4 class="font-medium text-gray-700">Other Tweets</h4> <ul class="list-disc pl-5 space-y-1 text-gray-600"></ul></div></div></div>'),S[m],[[29,0,[[30,1,[[31,3],[35,3],[36,3],[38,3,[[39,2],[40,2,[[41,4,[[41,23]]],[42,4,[[42,20]]],[43,4,[[43,23]]],[44,4,[[44,19]]]]]]],[83,3,[[84,3],[85,3]]]]]]]]);function S(s,c){Ae(new.target),Re(c,!1,S);let n=ie(c,"user",8),R=ie(c,"setIsPopupOpen",8);const d=()=>R()(!1);function x(p,_){return _.map(u=>{var g;return(g=p[u])==null?void 0:g[0]}).filter(Boolean)}function B(p,_){return Object.entries(p).filter(([u])=>!_.includes(Number(u))).map(([u,g])=>g[0])}const P=n().ranking_material;let ne=x(n().user_data.tweets,P.tweet_pos),k=x(n().user_data.tweets,P.tweet_neg),C=x(n().user_data.description,P.description),y=B(n().user_data.tweets,[...P.tweet_pos,...P.tweet_neg]);He();var U=Ct(),N=t(U),W=t(N),A=a(W,2),ee=t(A,!0);e(A);var X=a(A,2),ce=t(X,!0);e(X);var Q=a(X,2),I=a(t(Q),2),M=t(I),H=a(t(M)),te=t(H,!0);e(H),e(M);var L=a(M,2),E=a(t(L)),Y=t(E,!0);e(E),e(L);var K=a(L,2),Z=a(t(K)),ve=t(Z,!0);e(Z),e(K);var fe=a(K,2),se=a(t(fe)),me=t(se,!0);e(se),e(fe),e(I),e(Q);var ae=a(Q,2);{var ge=p=>{var _=Wt(),u=a(t(_),2);V(u,5,()=>C,q,(o,w)=>{var j=Ut(),$=t(j,!0);e(j),F(()=>i($,l(w))),f(o,j)}),e(u);var g=a(u,2),r=a(t(g)),v=t(r,!0);e(r),e(g),e(_),F(o=>i(v,o),[()=>n().scores.desc.toFixed(3)],le),f(p,_)};J(ae,p=>{C.length>0&&p(ge)})}var ue=a(ae,2);{var xe=p=>{var _=Mt(),u=a(t(_),2);V(u,5,()=>ne,q,(o,w,j)=>{var $=At(),G=t($);e($),F(()=>i(G,`#${j+1}: ${l(w)??""}`)),f(o,$)}),e(u);var g=a(u,2),r=a(t(g)),v=t(r,!0);e(r),e(g),e(_),F(o=>i(v,o),[()=>n().scores.tweet_pos.toFixed(3)],le),f(p,_)};J(ue,p=>{ne.length>0&&p(xe)})}var de=a(ue,2);{var pe=p=>{var _=Gt(),u=a(t(_),2);V(u,5,()=>k,q,(o,w,j)=>{var $=Lt(),G=t($);e($),F(()=>i(G,`#${j+1}: ${l(w)??""}`)),f(o,$)}),e(u);var g=a(u,2),r=a(t(g)),v=t(r,!0);e(r),e(g),e(_),F(o=>i(v,o),[()=>n().scores.tweet_neg.toFixed(3)],le),f(p,_)};J(de,p=>{k.length>0&&p(pe)})}var he=a(de,2),be=a(t(he),2);return V(be,5,()=>y,q,(p,_)=>{var u=Rt(),g=t(u,!0);e(u),F(()=>i(g,l(_))),f(p,u)}),e(be),e(he),e(N),e(U),F((p,_,u,g)=>{var r;i(ee,n().user_data.username),i(ce,((r=n().user_data.description[n().uid])==null?void 0:r[0])||"No description available"),i(te,p),i(Y,_),i(ve,u),i(me,g)},[()=>n().scores.sementic.toFixed(3),()=>n().scores.likes.toFixed(3),()=>n().scores.rt.toFixed(3),()=>n().scores.followers_count.toFixed(3)],le),_e("click",W,d),f(s,U),Ce({...Me()})}Ge(S);const Ht=()=>{const s=It;return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},updated:s.updated}},ze={subscribe(s){return Ht().page.subscribe(s)}};Le();D[m]="src/routes/product/explore/[pid]/+page.svelte";var Vt=b(h("<li> </li>"),D[m],[[131,4]]),qt=b(h("<li> </li>"),D[m],[[141,4]]),Bt=b(h("<li> </li>"),D[m],[[151,4]]),Xt=b(h('<div class="flex items-center justify-center h-full"><div class="animate-spin rounded-full h-10 w-10 border-b-2 border-gray-500"></div> <p class="ml-3 text-gray-700 font-semibold">Loading users...</p></div>'),D[m],[[175,2,[[176,4],[177,4]]]]),Yt=b(h('<p class="text-red-500 text-center"> </p>'),D[m],[[180,2]]),Zt=b(h('<button class="w-full text-left p-4 bg-white shadow-md rounded-lg transition-transform duration-300 transform hover:scale-105 hover:shadow-xl svelte-1e413e3"><h3 class="text-lg font-semibold text-gray-900"> <span class="text-red-500"> </span></h3> <p class="text-gray-600"> </p> <h4 class="mt-2 font-medium text-gray-700">Tweets:</h4> <ul class="list-disc pl-5 space-y-2 text-gray-600"><li> </li> <li> </li> <li> </li> <li> </li> <li> </li> <li> </li> <li> </li></ul></button>'),D[m],[[183,4,[[187,3,[[189,5]]],[193,3],[194,3],[195,3,[[196,5],[197,5],[198,5],[199,5],[200,5],[201,5],[202,5]]]]]]),zt=b(h("<div><!></div>"),D[m],[[211,3]]),Jt=b(h('<h1 class="text-5xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-pink-500 mt-8">User search</h1> <!> <hr class="my-6 border-t-2 border-gray-300"> <div class="flex flex-row items-start justify-between w-full px-6 py-8 space-x-6"><div class="w-1/2 p-6 rounded-lg shadow-lg bg-white sticky top-0"><div class="flex items-center justify-between space-x-4"><h2 class="text-2xl font-bold text-gray-900"> </h2> <button class="p-3 rounded-lg text-white font-semibold text-xl bg-gradient-to-r from-blue-400 to-pink-400 hover:from-blue-300 hover:to-pink-300 transition-all duration-300 transform hover:scale-105 svelte-1e413e3">Tune your search üß≠</button></div> <p class="mt-2 text-gray-600"> </p> <div class="mt-4"><h3 class="font-medium text-gray-700">Who are they ?</h3> <ul class="list-disc pl-5 space-y-2 text-gray-600"></ul></div> <div class="mt-4"><h3 class="font-medium text-gray-700">Life is a bless with your product:</h3> <ul class="list-disc pl-5 space-y-2 text-gray-600"></ul></div> <div class="mt-4"><h3 class="font-medium text-gray-700">Life is hard without your product:</h3> <ul class="list-disc pl-5 space-y-2 text-gray-600"></ul></div></div> <div class="relative flex items-center h-screen w-16 overflow-hidden"><div class="absolute inset-0 flex items-center justify-center"><p class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-pink-500 whitespace-nowrap tracking-wide animate-scroll svelte-1e413e3" style="writing-mode: vertical-lr;">„Åä „ÇÑ „Åô „Åø „Å™ „Åï „ÅÑ „ÄÅ ÂÑ™ „Åó „Åè „Åó „Å™ „ÅÑ „Åß „Åè „Å† „Åï „ÅÑ - „Åä „ÇÑ „Åô „Åø „Å™ „Åï „ÅÑ„ÄÅ ÂÑ™ „Åó „Åè „Åó „Å™ „ÅÑ „Åß „Åè „Å† „Åï „ÅÑ</p></div></div>  <div class="relative w-1/2 h-screen"><div class="h-full overflow-y-auto space-y-4"><!></div> <!></div></div>',1),D[m],[[97,0],[104,0],[106,0,[[108,2,[[111,1,[[113,3],[116,3]]],[124,1],[127,1,[[128,3],[129,3]]],[137,1,[[138,3],[139,3]]],[147,1,[[148,3],[149,3]]]]],[160,2,[[161,1,[[162,3]]]]],[170,0,[[172,1]]]]]]);function D(s,c){Ae(new.target),Re(c,!1,D);const[n,R]=Ft(),d=()=>(Et(ze,"page"),Ot(ze,"$page",n)),x=z(),B=z(),P=z(),k=ie(c,"data",8)().product;let C=z(null),y=z({engine:!0,users:!0});bt(async()=>{try{const r=await fetch(`${k.pid}/engine`,{method:"GET"});if(!r.ok)throw new Error(`Failed to start engine : ${r.status}`);O(B,await r.json()),re(y,l(y).engine=!1);const v=await fetch(`${k.pid}/users`,{method:"GET"});if(!v.ok)throw new Error(`Failed to fetch users data : ${v.status}`);O(x,await v.json()),re(y,l(y).users=!1)}catch(r){O(C,r.message),console.error(...Pt("error","Fetch error:",r))}finally{re(y,l(y).engine=!1),re(y,l(y).users=!1)}});let U={occurrence:1,similarity_pos:1,similarity_neg:1,similarity_desc:1,followers_count:1,likes:1,rt:1},N=z(!1),W=z(!1),A=z(null);const ee=r=>{O(N,r)},X=r=>{O(W,r)},ce=r=>{O(A,r),O(W,!0)},Q=async()=>{re(y,l(y).users=!0);const r=new FormData;if(Object.entries(U).forEach(([w,j])=>r.append(w,j.toString())),(await(await fetch(`${k.pid}/users`,{method:"POST",body:r})).json()).message.includes("OK")){const w=await fetch(`${k.pid}/users`,{method:"GET"});O(x,await w.json())}else O(C,"Error computing users scores");re(y,l(y).users=!1)};Ee(()=>{},()=>{O(x,[])}),Ee(()=>{},()=>{O(B,null)}),Ee(()=>d(),()=>{O(P,d().url.href)}),yt(),He();var I=Jt(),M=a(we(I),2);{var H=r=>{oe(r,{weights:U,get isPopupOpen(){return l(N)},setIsPopupOpen:ee,$$events:{updateWeights:Q}})};J(M,r=>{l(N)&&r(H)})}var te=a(M,4),L=t(te),E=t(L),Y=t(E),K=t(Y);e(Y);var Z=a(Y,2);e(E);var ve=a(E,2),fe=t(ve,!0);e(ve);var se=a(ve,2),me=a(t(se),2);V(me,5,()=>k.gen_description,q,(r,v)=>{var o=Vt(),w=t(o,!0);e(o),F(()=>i(w,l(v))),f(r,o)}),e(me),e(se);var ae=a(se,2),ge=a(t(ae),2);V(ge,5,()=>k.gen_tweets_pos,q,(r,v)=>{var o=qt(),w=t(o,!0);e(o),F(()=>i(w,l(v))),f(r,o)}),e(ge),e(ae);var ue=a(ae,2),xe=a(t(ue),2);V(xe,5,()=>k.gen_tweets_neg,q,(r,v)=>{var o=Bt(),w=t(o,!0);e(o),F(()=>i(w,l(v))),f(r,o)}),e(xe),e(ue),e(L);var de=a(L,4),pe=t(de),he=t(pe);{var be=r=>{var v=Xt();f(r,v)},p=r=>{var v=Ue(),o=we(v);{var w=$=>{var G=Yt(),ke=t(G,!0);e(G),F(()=>i(ke,l(C))),f($,G)},j=$=>{var G=Ue(),ke=we(G);V(ke,1,()=>l(x),q,(Je,T)=>{var ye=Zt(),$e=t(ye),Ve=t($e),qe=a(Ve),Qe=t(qe,!0);e(qe),e($e);var Fe=a($e,2),Ke=t(Fe,!0);e(Fe);var Be=a(Fe,4),Oe=t(Be),et=t(Oe);e(Oe);var Pe=a(Oe,2),tt=t(Pe);e(Pe);var Ie=a(Pe,2),st=t(Ie);e(Ie);var Te=a(Ie,2),at=t(Te);e(Te);var Se=a(Te,2),rt=t(Se);e(Se);var Ne=a(Se,2),lt=t(Ne);e(Ne);var Xe=a(Ne,2),it=t(Xe);e(Xe),e(Be),e(ye),F((ot,nt,ct,vt,ut,dt,pt,_t)=>{i(Ve,`${l(T).user_data.username??""} `),i(Qe,ot),i(Ke,l(T).user_data.description[l(T).uid][0]),i(et,`üòç How deep in love he is with your product: ${nt??""}`),i(tt,`üò≠ How badly he craves for your product: ${ct??""}`),i(st,`üëÆ How close he associates: ${vt??""}`),i(at,`üëØ Occurrence score: ${ut??""}`),i(rt,`ü´∂ Average likes: ${dt??""}`),i(lt,`üê£ Average retweets: ${pt??""}`),i(it,`üåè Followers: ${_t??""}`)},[()=>l(T).scores.sementic.toFixed(3),()=>l(T).scores.tweet_pos.toFixed(3),()=>l(T).scores.tweet_neg.toFixed(3),()=>l(T).scores.desc.toFixed(3),()=>l(T).scores.occurence.toFixed(3),()=>l(T).scores.likes.toFixed(3),()=>l(T).scores.rt.toFixed(3),()=>l(T).scores.followers_count.toFixed(3)],le),_e("click",ye,()=>ce(l(T))),f(Je,ye)}),f($,G)};J(o,$=>{l(C)?$(w):$(j,!1)},!0)}f(r,v)};J(he,r=>{wt(l(y).users,!0)?r(be):r(p,!1)})}e(pe);var _=a(pe,2);{var u=r=>{var v=zt(),o=t(v);S(o,{get user(){return l(A)},setIsPopupOpen:X}),e(v),F(()=>Tt(v,`absolute top-0 right-0 w-full h-full bg-white/95 backdrop-blur-sm shadow-lg overflow-y-auto transition-transform duration-300 ${(l(W)?"translate-x-0":"translate-x-full")??""}`)),f(r,v)};J(_,r=>{l(W)&&l(A)&&r(u)})}e(de),e(te),F(()=>{i(K,`(${k.pid??""}) ${k.type??""}`),i(fe,k.description)}),_e("click",Z,()=>O(N,!0)),f(s,I);var g=Ce({...Me()});return R(),g}Ge(D);export{D as component};
