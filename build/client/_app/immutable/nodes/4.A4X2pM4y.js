import{c as Ne,b as ge,a as d,l as Le,t as h}from"../chunks/DroBwdLr.js";import"../chunks/_FgpyuGP.js";import{aN as ft,aO as ze,h as mt,i as gt,aE as xt,aP as bt,m as Re,a as Ce,p as Ge,aQ as ht,f as ie,b as He,s,c as t,F as _,r as e,t as O,L as oe,g as l,aR as yt,aS as We,aT as wt,I as X,aU as Oe,J as T,aV as le}from"../chunks/g3Tmz0S3.js";import{l as kt,a as y,e as xe}from"../chunks/CKB5XqNR.js";import{s as i}from"../chunks/Qs_-gKkR.js";import{i as C}from"../chunks/0GM-F11P.js";import{e as V,r as Ft,s as Xe,i as q}from"../chunks/BmYs9oa1.js";import{s as Ot}from"../chunks/B8fgIfpB.js";import{i as Ve}from"../chunks/DS3mA53_.js";import{p as ne,s as $t,a as Pt}from"../chunks/ACi1ui8k.js";import{l as It}from"../chunks/D5ilOZxg.js";import{s as Tt}from"../chunks/Cna-DAt6.js";function jt(r,p,c=p){var Y=ft();kt(r,"input",P=>{r.type==="checkbox"&&ze();var w=P?r.defaultValue:r.value;if(w=Ae(r)?Me(w):w,c(w),Y&&w!==(w=p())){var B=r.selectionStart,j=r.selectionEnd;r.value=w??"",j!==null&&(r.selectionStart=B,r.selectionEnd=Math.min(j,r.value.length))}}),(mt&&r.defaultValue!==r.value||gt(p)==null&&r.value)&&c(Ae(r)?Me(r.value):r.value),xt(()=>{r.type==="checkbox"&&ze();var P=p();Ae(r)&&P===Me(r.value)||r.type==="date"&&!P&&!r.value||P!==r.value&&(r.value=P??"")})}function Ae(r){var p=r.type;return p==="number"||p==="range"}function Me(r){return r===""?null:+r}function St(r,p){r!=null&&typeof r.subscribe!="function"&&bt(p)}Re();ce[_]="src/lib/components/Weights.svelte";var Et=y(h('<div class="weight-control svelte-9u5fer"><label class="label svelte-9u5fer"> </label> <div class="slider-container svelte-9u5fer"><input type="range" min="0" max="20" step="0.1" class="slider svelte-9u5fer"> <span class="value svelte-9u5fer"> </span></div></div>'),ce[_],[[40,10,[[41,12],[42,12,[[43,14],[50,14]]]]]]),Ut=y(h('<div class="popup-backdrop svelte-9u5fer"><div class="popup-content svelte-9u5fer"><button class="close-button svelte-9u5fer">√ó</button> <h2 class="text-4xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-pink-500 mt-8">Tune your search</h2> <div class="mb-6"></div> <!> <div class="save-button-container svelte-9u5fer"><button class="mt-6 p-3 rounded-lg text-white font-semibold text-xl bg-gradient-to-r from-blue-400 to-pink-400 hover:from-blue-300 hover:to-pink-300 transition-all duration-300 transform hover:scale-105">Save Weights</button></div></div></div>'),ce[_],[[33,4,[[34,6,[[35,8],[37,8],[38,8],[55,8,[[56,12]]]]]]]]);function ce(r,p){Ne(new.target),Ge(p,!1,ce);let c=ne(p,"weights",12),Y=ne(p,"isPopupOpen",8),P=ne(p,"setIsPopupOpen",8);const w=ht(),B=()=>{w("updateWeights"),P()(!1)},j=()=>{P()(!1)},ve={occurrence:"I want my user to have a lot of similar material ‚úÖ‚úÖ",similarity_pos:"I want my user to be in love with my product ü•∞",similarity_neg:"I want my user to be craving for my product ü§í",similarity_desc:"I want my user to associate with my product üßöü•∑",followers_count:"I want my user to be famous üëë",likes:"I want my user to be liked üì∂",rt:"I want my user to be impactful üåé‚Äã"};Ve();var k=ge(),G=ie(k);{var g=A=>{var D=Ut(),M=t(D),N=t(M),ee=s(N,6);V(ee,1,()=>Object.keys(c()),q,(Z,S)=>{var L=Et(),H=t(L),te=t(H,!0);e(H);var R=s(H,2),W=t(R);Ft(W);var Q=s(W,2),K=t(Q);e(Q),e(R),e(L),O(z=>{Xe(H,"for",l(S)),i(te,ve[l(S)]),Xe(W,"id",l(S)),i(K,`${z??""} / 20`)},[()=>c()[l(S)].toFixed(0)],oe),jt(W,()=>c()[l(S)],z=>c(c()[l(S)]=z,!0)),d(Z,L)});var J=s(ee,2),de=t(J);e(J),e(M),e(D),xe("click",N,j),xe("click",de,B),d(A,D)};C(G,A=>{Y()&&A(g)})}return d(r,k),He({...Le()})}Ce(ce);Re();E[_]="src/lib/components/UserDetails.svelte";var Dt=y(h("<li> </li>"),E[_],[[53,5]]),Wt=y(h('<div class="mt-4"><h4 class="font-medium text-blue-600">Similar Descriptions</h4> <ul class="list-disc pl-5 space-y-1 text-gray-600"></ul> <p>Avg. Similarity: <span class="font-semibold"> </span></p></div>'),E[_],[[49,2,[[50,4],[51,4],[56,4,[[56,24]]]]]]),At=y(h("<li> </li>"),E[_],[[65,5]]),Mt=y(h('<div class="mt-4"><h4 class="font-medium text-green-600">Most Positive Tweets</h4> <ul class="list-disc pl-5 space-y-1 text-gray-600"></ul> <p>Avg. Similarity: <span class="font-semibold"> </span></p></div>'),E[_],[[61,2,[[62,4],[63,4],[68,4,[[68,24]]]]]]),Nt=y(h("<li> </li>"),E[_],[[77,5]]),Lt=y(h('<div class="mt-4"><h4 class="font-medium text-red-600">Most Negative Tweets</h4> <ul class="list-disc pl-5 space-y-1 text-gray-600"></ul> <p>Avg. Similarity: <span class="font-semibold"> </span></p></div>'),E[_],[[73,2,[[74,4],[75,4],[80,4,[[80,24]]]]]]),Rt=y(h("<li> </li>"),E[_],[[87,5]]),Ct=y(h('<div class="h-full overflow-y-auto"><div class="p-6"><button class="text-gray-500 hover:text-gray-700 mb-4">‚¨ÖÔ∏è Back to list</button> <h3 class="text-xl font-bold text-gray-900 mb-2"> </h3> <p class="text-gray-600"> </p> <div class="mt-4"><h4 class="font-medium text-gray-700">User Stats</h4> <ul class="list-disc pl-5 space-y-1 text-gray-600"><li>Overall Score: <span class="font-semibold"> </span></li> <li>Avg. Likes: <span class="font-semibold"> </span></li> <li>Avg. Retweets: <span class="font-semibold"> </span></li> <li>Followers: <span class="font-semibold"> </span></li></ul></div> <!> <!> <!> <div class="mt-4"><h4 class="font-medium text-gray-700">Other Tweets</h4> <ul class="list-disc pl-5 space-y-1 text-gray-600"></ul></div></div></div>'),E[_],[[29,0,[[30,1,[[31,3],[35,3],[36,3],[38,3,[[39,2],[40,2,[[41,4,[[41,23]]],[42,4,[[42,20]]],[43,4,[[43,23]]],[44,4,[[44,19]]]]]]],[83,3,[[84,3],[85,3]]]]]]]]);function E(r,p){Ne(new.target),Ge(p,!1,E);let c=ne(p,"user",8),Y=ne(p,"setIsPopupOpen",8);const P=()=>Y()(!1);function w(f,m){return m.map(v=>{var x;return(x=f[v])==null?void 0:x[0]}).filter(Boolean)}function B(f,m){return Object.entries(f).filter(([v])=>!m.includes(Number(v))).map(([v,x])=>x[0])}const j=c().ranking_material;let ve=w(c().user_data.tweets,j.tweet_pos),k=w(c().user_data.tweets,j.tweet_neg),G=w(c().user_data.description,j.description),g=B(c().user_data.tweets,[...j.tweet_pos,...j.tweet_neg]);Ve();var A=Ct(),D=t(A),M=t(D),N=s(M,2),ee=t(N,!0);e(N);var J=s(N,2),de=t(J,!0);e(J);var Z=s(J,2),S=s(t(Z),2),L=t(S),H=s(t(L)),te=t(H,!0);e(H),e(L);var R=s(L,2),W=s(t(R)),Q=t(W,!0);e(W),e(R);var K=s(R,2),z=s(t(K)),ue=t(z,!0);e(z),e(K);var be=s(K,2),se=s(t(be)),he=t(se,!0);e(se),e(be),e(S),e(Z);var ae=s(Z,2);{var ye=f=>{var m=Wt(),v=s(t(m),2);V(v,5,()=>G,q,(o,b)=>{var I=Dt(),u=t(I,!0);e(I),O(()=>i(u,l(b))),d(o,I)}),e(v);var x=s(v,2),a=s(t(x)),n=t(a,!0);e(a),e(x),e(m),O(o=>i(n,o),[()=>c().scores.desc.toFixed(3)],oe),d(f,m)};C(ae,f=>{G.length>0&&f(ye)})}var pe=s(ae,2);{var we=f=>{var m=Mt(),v=s(t(m),2);V(v,5,()=>ve,q,(o,b,I)=>{var u=At(),$=t(u);e(u),O(()=>i($,`#${I+1}: ${l(b)??""}`)),d(o,u)}),e(v);var x=s(v,2),a=s(t(x)),n=t(a,!0);e(a),e(x),e(m),O(o=>i(n,o),[()=>c().scores.tweet_pos.toFixed(3)],oe),d(f,m)};C(pe,f=>{ve.length>0&&f(we)})}var _e=s(pe,2);{var fe=f=>{var m=Lt(),v=s(t(m),2);V(v,5,()=>k,q,(o,b,I)=>{var u=Nt(),$=t(u);e(u),O(()=>i($,`#${I+1}: ${l(b)??""}`)),d(o,u)}),e(v);var x=s(v,2),a=s(t(x)),n=t(a,!0);e(a),e(x),e(m),O(o=>i(n,o),[()=>c().scores.tweet_neg.toFixed(3)],oe),d(f,m)};C(_e,f=>{k.length>0&&f(fe)})}var ke=s(_e,2),Fe=s(t(ke),2);return V(Fe,5,()=>g,q,(f,m)=>{var v=Rt(),x=t(v,!0);e(v),O(()=>i(x,l(m))),d(f,v)}),e(Fe),e(ke),e(D),e(A),O((f,m,v,x)=>{var a;i(ee,c().user_data.username),i(de,((a=c().user_data.description[c().uid])==null?void 0:a[0])||"No description available"),i(te,f),i(Q,m),i(ue,v),i(he,x)},[()=>c().scores.sementic.toFixed(3),()=>c().scores.likes.toFixed(3),()=>c().scores.rt.toFixed(3),()=>c().scores.followers_count.toFixed(3)],oe),xe("click",M,P),d(r,A),He({...Le()})}Ce(E);const Gt=()=>{const r=Tt;return{page:{subscribe:r.page.subscribe},navigating:{subscribe:r.navigating.subscribe},updated:r.updated}},Ye={subscribe(r){return Gt().page.subscribe(r)}};Re();U[_]="src/routes/product/explore/[pid]/+page.svelte";var Ht=y(h("<li> </li>"),U[_],[[131,4]]),Vt=y(h("<li> </li>"),U[_],[[141,4]]),qt=y(h("<li> </li>"),U[_],[[151,4]]),Bt=y(h('<div class="flex flex-col items-center justify-center h-full p-6 bg-gray-50 rounded-lg shadow-sm"><div class="flex items-center justify-center mb-4"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div></div> <div class="text-center space-y-2"><p class="text-gray-800 font-semibold text-lg">Instantiating recommendation engine</p> <div class="flex space-x-1 justify-center"><span class="animate-bounce delay-75 h-2 w-2 bg-blue-500 rounded-full"></span> <span class="animate-bounce delay-150 h-2 w-2 bg-blue-500 rounded-full"></span> <span class="animate-bounce delay-300 h-2 w-2 bg-blue-500 rounded-full"></span></div> <p class="text-gray-600">This may take 20-30 seconds</p> <p class="text-gray-500 text-sm italic">Once engine is running, loading will be much faster</p></div></div>'),U[_],[[176,4,[[177,3,[[178,5]]],[180,3,[[181,5],[182,5,[[183,4],[184,4],[185,4]]],[187,5],[188,5]]]]]]),Jt=y(h('<div class="flex items-center justify-center h-full p-4 bg-gray-50 rounded-lg"><div class="animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"></div> <p class="ml-3 text-gray-700 font-semibold">Creating users list...</p></div>'),U[_],[[192,4,[[193,3],[194,3]]]]),Qt=y(h('<p class="text-red-500 text-center"> </p>'),U[_],[[198,2]]),zt=y(h('<button class="w-full text-left p-4 bg-white shadow-md rounded-lg transition-transform duration-300 transform hover:scale-105 hover:shadow-xl svelte-1e413e3"><h3 class="text-lg font-semibold text-gray-900"> <span class="text-red-500"> </span></h3> <p class="text-gray-600"> </p> <h4 class="mt-2 font-medium text-gray-700">Tweets:</h4> <ul class="list-disc pl-5 space-y-2 text-gray-600"><li> </li> <li> </li> <li> </li> <li> </li> <li> </li> <li> </li> <li> </li></ul></button>'),U[_],[[201,4,[[205,3,[[207,5]]],[211,3],[212,3],[213,3,[[214,5],[215,5],[216,5],[217,5],[218,5],[219,5],[220,5]]]]]]),Xt=y(h("<div><!></div>"),U[_],[[229,3]]),Yt=y(h('<h1 class="text-5xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-pink-500 mt-8">User search</h1> <!> <hr class="my-6 border-t-2 border-gray-300"> <div class="flex flex-row items-start justify-between w-full px-6 py-8 space-x-6"><div class="w-1/2 p-6 rounded-lg shadow-lg bg-white sticky top-0"><div class="flex items-center justify-between space-x-4"><h2 class="text-2xl font-bold text-gray-900"> </h2> <button class="p-3 rounded-lg text-white font-semibold text-xl bg-gradient-to-r from-blue-400 to-pink-400 hover:from-blue-300 hover:to-pink-300 transition-all duration-300 transform hover:scale-105 svelte-1e413e3">Tune your search üß≠</button></div> <p class="mt-2 text-gray-600"> </p> <div class="mt-4"><h3 class="font-medium text-gray-700">Who are they ?</h3> <ul class="list-disc pl-5 space-y-2 text-gray-600"></ul></div> <div class="mt-4"><h3 class="font-medium text-gray-700">Life is a bless with your product:</h3> <ul class="list-disc pl-5 space-y-2 text-gray-600"></ul></div> <div class="mt-4"><h3 class="font-medium text-gray-700">Life is hard without your product:</h3> <ul class="list-disc pl-5 space-y-2 text-gray-600"></ul></div></div> <div class="relative flex items-center h-screen w-16 overflow-hidden"><div class="absolute inset-0 flex items-center justify-center"><p class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-pink-500 whitespace-nowrap tracking-wide animate-scroll svelte-1e413e3" style="writing-mode: vertical-lr;">„Åä „ÇÑ „Åô „Åø „Å™ „Åï „ÅÑ „ÄÅ ÂÑ™ „Åó „Åè „Åó „Å™ „ÅÑ „Åß „Åè „Å† „Åï „ÅÑ - „Åä „ÇÑ „Åô „Åø „Å™ „Åï „ÅÑ„ÄÅ ÂÑ™ „Åó „Åè „Åó „Å™ „ÅÑ „Åß „Åè „Å† „Åï „ÅÑ</p></div></div>  <div class="relative w-1/2 h-screen"><div class="h-full overflow-y-auto space-y-4"><!></div> <!></div></div>',1),U[_],[[97,0],[104,0],[106,0,[[108,2,[[111,1,[[113,3],[116,3]]],[124,1],[127,1,[[128,3],[129,3]]],[137,1,[[138,3],[139,3]]],[147,1,[[148,3],[149,3]]]]],[160,2,[[161,1,[[162,3]]]]],[170,0,[[172,1]]]]]]);function U(r,p){Ne(new.target),Ge(p,!1,U);const[c,Y]=$t(),P=()=>(St(Ye,"page"),Pt(Ye,"$page",c)),w=X(),B=X(),j=X(),k=ne(p,"data",8)().product;let G=X(null),g=X({engine:!0,users:!0});yt(async()=>{try{const a=await fetch(`${k.pid}/engine`,{method:"GET"});if(!a.ok)throw new Error(`Failed to start engine : ${a.status}`);T(B,await a.json()),le(g,l(g).engine=!1);const n=await fetch(`${k.pid}/users`,{method:"GET"});if(!n.ok)throw new Error(`Failed to fetch users data : ${n.status}`);T(w,await n.json()),le(g,l(g).users=!1)}catch(a){T(G,a.message),console.error(...It("error","Fetch error:",a))}finally{le(g,l(g).engine=!1),le(g,l(g).users=!1)}});let A={occurrence:1,similarity_pos:1,similarity_neg:1,similarity_desc:1,followers_count:1,likes:1,rt:1},D=X(!1),M=X(!1),N=X(null);const ee=a=>{T(D,a)},J=a=>{T(M,a)},de=a=>{T(N,a),T(M,!0)},Z=async()=>{le(g,l(g).users=!0);const a=new FormData;if(Object.entries(A).forEach(([b,I])=>a.append(b,I.toString())),(await(await fetch(`${k.pid}/users`,{method:"POST",body:a})).json()).message.includes("OK")){const b=await fetch(`${k.pid}/users`,{method:"GET"});T(w,await b.json())}else T(G,"Error computing users scores");le(g,l(g).users=!1)};We(()=>{},()=>{T(w,[])}),We(()=>{},()=>{T(B,null)}),We(()=>P(),()=>{T(j,P().url.href)}),wt(),Ve();var S=Yt(),L=s(ie(S),2);{var H=a=>{ce(a,{weights:A,get isPopupOpen(){return l(D)},setIsPopupOpen:ee,$$events:{updateWeights:Z}})};C(L,a=>{l(D)&&a(H)})}var te=s(L,4),R=t(te),W=t(R),Q=t(W),K=t(Q);e(Q);var z=s(Q,2);e(W);var ue=s(W,2),be=t(ue,!0);e(ue);var se=s(ue,2),he=s(t(se),2);V(he,5,()=>k.gen_description,q,(a,n)=>{var o=Ht(),b=t(o,!0);e(o),O(()=>i(b,l(n))),d(a,o)}),e(he),e(se);var ae=s(se,2),ye=s(t(ae),2);V(ye,5,()=>k.gen_tweets_pos,q,(a,n)=>{var o=Vt(),b=t(o,!0);e(o),O(()=>i(b,l(n))),d(a,o)}),e(ye),e(ae);var pe=s(ae,2),we=s(t(pe),2);V(we,5,()=>k.gen_tweets_neg,q,(a,n)=>{var o=qt(),b=t(o,!0);e(o),O(()=>i(b,l(n))),d(a,o)}),e(we),e(pe),e(R);var _e=s(R,4),fe=t(_e),ke=t(fe);{var Fe=a=>{var n=ge(),o=ie(n);{var b=u=>{var $=Bt();d(u,$)},I=u=>{var $=ge(),me=ie($);{var $e=F=>{var re=Jt();d(F,re)};C(me,F=>{Oe(l(g).users,!0)&&F($e)},!0)}d(u,$)};C(o,u=>{Oe(l(g).engine,!0)?u(b):u(I,!1)})}d(a,n)},f=a=>{var n=ge(),o=ie(n);{var b=u=>{var $=Qt(),me=t($,!0);e($),O(()=>i(me,l(G))),d(u,$)},I=u=>{var $=ge(),me=ie($);V(me,1,()=>l(w),q,($e,F)=>{var re=zt(),Pe=t(re),qe=t(Pe),Be=s(qe),Ze=t(Be,!0);e(Be),e(Pe);var Ie=s(Pe,2),Ke=t(Ie,!0);e(Ie);var Je=s(Ie,4),Te=t(Je),et=t(Te);e(Te);var je=s(Te,2),tt=t(je);e(je);var Se=s(je,2),st=t(Se);e(Se);var Ee=s(Se,2),at=t(Ee);e(Ee);var Ue=s(Ee,2),rt=t(Ue);e(Ue);var De=s(Ue,2),lt=t(De);e(De);var Qe=s(De,2),it=t(Qe);e(Qe),e(Je),e(re),O((ot,nt,ct,vt,dt,ut,pt,_t)=>{i(qe,`${l(F).user_data.username??""} `),i(Ze,ot),i(Ke,l(F).user_data.description[l(F).uid][0]),i(et,`üòç How deep in love he is with your product: ${nt??""}`),i(tt,`üò≠ How badly he craves for your product: ${ct??""}`),i(st,`üëÆ How close he associates: ${vt??""}`),i(at,`üëØ Occurrence score: ${dt??""}`),i(rt,`ü´∂ Average likes: ${ut??""}`),i(lt,`üê£ Average retweets: ${pt??""}`),i(it,`üåè Followers: ${_t??""}`)},[()=>l(F).scores.sementic.toFixed(3),()=>l(F).scores.tweet_pos.toFixed(3),()=>l(F).scores.tweet_neg.toFixed(3),()=>l(F).scores.desc.toFixed(3),()=>l(F).scores.occurence.toFixed(3),()=>l(F).scores.likes.toFixed(3),()=>l(F).scores.rt.toFixed(3),()=>l(F).scores.followers_count.toFixed(3)],oe),xe("click",re,()=>de(l(F))),d($e,re)}),d(u,$)};C(o,u=>{l(G)?u(b):u(I,!1)},!0)}d(a,n)};C(ke,a=>{Oe(l(g).users,!0)||Oe(l(g).engine,!0)?a(Fe):a(f,!1)})}e(fe);var m=s(fe,2);{var v=a=>{var n=Xt(),o=t(n);E(o,{get user(){return l(N)},setIsPopupOpen:J}),e(n),O(()=>Ot(n,`absolute top-0 right-0 w-full h-full bg-white/95 backdrop-blur-sm shadow-lg overflow-y-auto transition-transform duration-300 ${(l(M)?"translate-x-0":"translate-x-full")??""}`)),d(a,n)};C(m,a=>{l(M)&&l(N)&&a(v)})}e(_e),e(te),O(()=>{i(K,`(${k.pid??""}) ${k.type??""}`),i(be,k.description)}),xe("click",z,()=>T(D,!0)),d(r,S);var x=He({...Le()});return Y(),x}Ce(U);export{U as component};
